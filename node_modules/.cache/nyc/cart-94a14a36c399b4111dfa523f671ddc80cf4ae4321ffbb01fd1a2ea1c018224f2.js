function cov_2mv32lx3y3(){var path="C:\\Users\\bolorundurovb\\Documents\\Web Projects\\E_Commerce\\routes\\cart.js";var hash="dcf06cc6f31604fb850696da64bdc17c637e2c3d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\bolorundurovb\\Documents\\Web Projects\\E_Commerce\\routes\\cart.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:13},end:{line:2,column:29}},"2":{start:{line:3,column:15},end:{line:3,column:34}},"3":{start:{line:4,column:14},end:{line:4,column:40}},"4":{start:{line:5,column:17},end:{line:5,column:50}},"5":{start:{line:6,column:17},end:{line:6,column:31}},"6":{start:{line:8,column:14},end:{line:8,column:42}},"7":{start:{line:9,column:11},end:{line:9,column:37}},"8":{start:{line:14,column:0},end:{line:14,column:83}},"9":{start:{line:15,column:7},end:{line:15,column:26}},"10":{start:{line:16,column:0},end:{line:16,column:62}},"11":{start:{line:17,column:0},end:{line:19,column:3}},"12":{start:{line:18,column:4},end:{line:18,column:54}},"13":{start:{line:21,column:0},end:{line:27,column:4}},"14":{start:{line:30,column:0},end:{line:50,column:3}},"15":{start:{line:31,column:13},end:{line:31,column:29}},"16":{start:{line:32,column:26},end:{line:32,column:45}},"17":{start:{line:33,column:18},end:{line:33,column:19}},"18":{start:{line:34,column:28},end:{line:34,column:29}},"19":{start:{line:37,column:8},end:{line:41,column:9}},"20":{start:{line:38,column:12},end:{line:38,column:47}},"21":{start:{line:39,column:12},end:{line:39,column:57}},"22":{start:{line:42,column:8},end:{line:42,column:34}},"23":{start:{line:43,column:8},end:{line:43,column:26}},"24":{start:{line:48,column:6},end:{line:48,column:162}},"25":{start:{line:52,column:0},end:{line:126,column:3}},"26":{start:{line:53,column:17},end:{line:53,column:34}},"27":{start:{line:54,column:2},end:{line:54,column:44}},"28":{start:{line:55,column:13},end:{line:55,column:29}},"29":{start:{line:56,column:2},end:{line:56,column:20}},"30":{start:{line:57,column:13},end:{line:57,column:26}},"31":{start:{line:58,column:2},end:{line:58,column:20}},"32":{start:{line:60,column:0},end:{line:125,column:5}},"33":{start:{line:61,column:3},end:{line:61,column:24}},"34":{start:{line:62,column:6},end:{line:97,column:7}},"35":{start:{line:64,column:10},end:{line:96,column:5}},"36":{start:{line:65,column:3},end:{line:65,column:24}},"37":{start:{line:66,column:6},end:{line:68,column:7}},"38":{start:{line:67,column:10},end:{line:67,column:27}},"39":{start:{line:69,column:6},end:{line:82,column:7}},"40":{start:{line:70,column:10},end:{line:70,column:36}},"41":{start:{line:74,column:10},end:{line:80,column:11}},"42":{start:{line:81,column:10},end:{line:81,column:28}},"43":{start:{line:84,column:26},end:{line:84,column:27}},"44":{start:{line:86,column:6},end:{line:88,column:5}},"45":{start:{line:87,column:8},end:{line:87,column:48}},"46":{start:{line:89,column:4},end:{line:89,column:31}},"47":{start:{line:90,column:4},end:{line:90,column:62}},"48":{start:{line:95,column:4},end:{line:95,column:26}},"49":{start:{line:98,column:6},end:{line:111,column:7}},"50":{start:{line:99,column:10},end:{line:99,column:36}},"51":{start:{line:103,column:10},end:{line:109,column:11}},"52":{start:{line:110,column:10},end:{line:110,column:28}},"53":{start:{line:113,column:26},end:{line:113,column:27}},"54":{start:{line:115,column:6},end:{line:117,column:5}},"55":{start:{line:116,column:8},end:{line:116,column:48}},"56":{start:{line:118,column:4},end:{line:118,column:31}},"57":{start:{line:119,column:4},end:{line:119,column:62}},"58":{start:{line:124,column:4},end:{line:124,column:26}},"59":{start:{line:128,column:0},end:{line:130,column:2}},"60":{start:{line:129,column:2},end:{line:129,column:21}},"61":{start:{line:132,column:0},end:{line:132,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:16},end:{line:17,column:17}},loc:{start:{line:17,column:34},end:{line:19,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:30,column:16},end:{line:30,column:17}},loc:{start:{line:30,column:36},end:{line:50,column:1}},line:30},"2":{name:"(anonymous_2)",decl:{start:{line:52,column:20},end:{line:52,column:21}},loc:{start:{line:52,column:40},end:{line:126,column:1}},line:52},"3":{name:"(anonymous_3)",decl:{start:{line:60,column:28},end:{line:60,column:29}},loc:{start:{line:60,column:49},end:{line:125,column:3}},line:60},"4":{name:"(anonymous_4)",decl:{start:{line:64,column:38},end:{line:64,column:39}},loc:{start:{line:64,column:59},end:{line:96,column:3}},line:64},"5":{name:"(anonymous_5)",decl:{start:{line:128,column:36},end:{line:128,column:37}},loc:{start:{line:128,column:56},end:{line:130,column:1}},line:128}},branchMap:{"0":{loc:{start:{line:54,column:21},end:{line:54,column:43}},type:"binary-expr",locations:[{start:{line:54,column:21},end:{line:54,column:37}},{start:{line:54,column:41},end:{line:54,column:43}}],line:54},"1":{loc:{start:{line:62,column:6},end:{line:97,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:97,column:7}},{start:{line:62,column:6},end:{line:97,column:7}}],line:62},"2":{loc:{start:{line:66,column:6},end:{line:68,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:68,column:7}},{start:{line:66,column:6},end:{line:68,column:7}}],line:66},"3":{loc:{start:{line:69,column:6},end:{line:82,column:7}},type:"if",locations:[{start:{line:69,column:6},end:{line:82,column:7}},{start:{line:69,column:6},end:{line:82,column:7}}],line:69},"4":{loc:{start:{line:98,column:6},end:{line:111,column:7}},type:"if",locations:[{start:{line:98,column:6},end:{line:111,column:7}},{start:{line:98,column:6},end:{line:111,column:7}}],line:98}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dcf06cc6f31604fb850696da64bdc17c637e2c3d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2mv32lx3y3=function(){return actualCoverage;};return actualCoverage;}cov_2mv32lx3y3();var express=(cov_2mv32lx3y3().s[0]++,require('express'));var router=(cov_2mv32lx3y3().s[1]++,express.Router());var mongoose=(cov_2mv32lx3y3().s[2]++,require('mongoose'));var session=(cov_2mv32lx3y3().s[3]++,require('express-session'));var MongoStore=(cov_2mv32lx3y3().s[4]++,require('connect-mongo')(session));var Handlebars=(cov_2mv32lx3y3().s[5]++,require('hbs'));var Product=(cov_2mv32lx3y3().s[6]++,require('../models/product'));var Deal=(cov_2mv32lx3y3().s[7]++,require('../models/deals'));//mongodb://admin:admin1234@ds014808.mlab.com:14808/ecommerceapp
//mongodb://localhost:27017/ecommercestore
cov_2mv32lx3y3().s[8]++;mongoose.connect('mongodb://admin:admin1234@ds014808.mlab.com:14808/ecommerceapp');var db=(cov_2mv32lx3y3().s[9]++,mongoose.connection);cov_2mv32lx3y3().s[10]++;db.on('error',console.log.bind(console,"connection error"));cov_2mv32lx3y3().s[11]++;db.once('open',function(callback){cov_2mv32lx3y3().f[0]++;cov_2mv32lx3y3().s[12]++;console.log("Database connection succeeded cart");});cov_2mv32lx3y3().s[13]++;router.use(session({secret:'secret',resave:false,saveUninitialized:false,store:new MongoStore({mongooseConnection:mongoose.connection}),cookie:{maxAge:180*60*1000}}));/* GET home page. */cov_2mv32lx3y3().s[14]++;router.get('/',(req,res,next)=>{cov_2mv32lx3y3().f[1]++;var cart=(cov_2mv32lx3y3().s[15]++,req.session.cart);var displayCart=(cov_2mv32lx3y3().s[16]++,{items:[],total:0});var total=(cov_2mv32lx3y3().s[17]++,0);var totalQuantity=(cov_2mv32lx3y3().s[18]++,0);//Get Total
cov_2mv32lx3y3().s[19]++;for(var item in cart){cov_2mv32lx3y3().s[20]++;displayCart.items.push(cart[item]);cov_2mv32lx3y3().s[21]++;total+=cart[item].qty*cart[item].price;//totalQuantity += Number(cart[item].qty);
}cov_2mv32lx3y3().s[22]++;displayCart.total=total;cov_2mv32lx3y3().s[23]++;console.log(cart);//console.log(totalQuantity);
//Render Cart
cov_2mv32lx3y3().s[24]++;res.render('cart',{title:'E-Commerce || Cart',email:req.cookies.email,cart:cart,cartTotal:total,namee:req.cookies.cc,quant:req.cookies.quant});});cov_2mv32lx3y3().s[25]++;router.post('/:id',function(req,res){cov_2mv32lx3y3().f[2]++;var quantity=(cov_2mv32lx3y3().s[26]++,req.body.quantity);cov_2mv32lx3y3().s[27]++;req.session.cart=(cov_2mv32lx3y3().b[0][0]++,req.session.cart)||(cov_2mv32lx3y3().b[0][1]++,{});var cart=(cov_2mv32lx3y3().s[28]++,req.session.cart);cov_2mv32lx3y3().s[29]++;console.log(cart);var test=(cov_2mv32lx3y3().s[30]++,req.params.id);cov_2mv32lx3y3().s[31]++;console.log(test);cov_2mv32lx3y3().s[32]++;Product.findOne({_id:test},function(err,product){cov_2mv32lx3y3().f[3]++;cov_2mv32lx3y3().s[33]++;console.log(product);cov_2mv32lx3y3().s[34]++;if(err){cov_2mv32lx3y3().b[1][0]++;cov_2mv32lx3y3().s[35]++;//console.log(err);
Product.findOne({_id:test},function(err,product){cov_2mv32lx3y3().f[4]++;cov_2mv32lx3y3().s[36]++;console.log(product);cov_2mv32lx3y3().s[37]++;if(err){cov_2mv32lx3y3().b[2][0]++;cov_2mv32lx3y3().s[38]++;console.log(err);}else{cov_2mv32lx3y3().b[2][1]++;}cov_2mv32lx3y3().s[39]++;if(cart[req.params.id]){cov_2mv32lx3y3().b[3][0]++;cov_2mv32lx3y3().s[40]++;cart[req.params.id].qty++;}else{cov_2mv32lx3y3().b[3][1]++;cov_2mv32lx3y3().s[41]++;cart[req.params.id]={item:product._id,title:product.title,price:product.price,qty:quantity,imagePath:product.imagePath};cov_2mv32lx3y3().s[42]++;console.log(cart);}var totalQuantity=(cov_2mv32lx3y3().s[43]++,0);//Get Total
cov_2mv32lx3y3().s[44]++;for(var item in cart){cov_2mv32lx3y3().s[45]++;totalQuantity+=Number(cart[item].qty);}cov_2mv32lx3y3().s[46]++;console.log(totalQuantity);cov_2mv32lx3y3().s[47]++;res.cookie('quant',totalQuantity,{maxAge:180*60*1000});//res.render('./cart', {cart: cart, message:'Added to cart successfully', success:'message'});
//res.clearCookie('quant');
cov_2mv32lx3y3().s[48]++;res.redirect('/cart');});}else{cov_2mv32lx3y3().b[1][1]++;}cov_2mv32lx3y3().s[49]++;if(cart[req.params.id]){cov_2mv32lx3y3().b[4][0]++;cov_2mv32lx3y3().s[50]++;cart[req.params.id].qty++;}else{cov_2mv32lx3y3().b[4][1]++;cov_2mv32lx3y3().s[51]++;cart[req.params.id]={item:product._id,title:product.title,price:product.price,qty:quantity,imagePath:product.imagePath};cov_2mv32lx3y3().s[52]++;console.log(cart);}var totalQuantity=(cov_2mv32lx3y3().s[53]++,0);//Get Total
cov_2mv32lx3y3().s[54]++;for(var item in cart){cov_2mv32lx3y3().s[55]++;totalQuantity+=Number(cart[item].qty);}cov_2mv32lx3y3().s[56]++;console.log(totalQuantity);cov_2mv32lx3y3().s[57]++;res.cookie('quant',totalQuantity,{maxAge:180*60*1000});//res.render('./cart', {cart: cart, message:'Added to cart successfully', success:'message'});
//res.clearCookie('quant');
cov_2mv32lx3y3().s[58]++;res.redirect('/cart');});});cov_2mv32lx3y3().s[59]++;Handlebars.registerHelper('totalP',function(price,qty){cov_2mv32lx3y3().f[5]++;cov_2mv32lx3y3().s[60]++;return price*qty;});cov_2mv32lx3y3().s[61]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcnQuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJtb25nb29zZSIsInNlc3Npb24iLCJNb25nb1N0b3JlIiwiSGFuZGxlYmFycyIsIlByb2R1Y3QiLCJEZWFsIiwiY29ubmVjdCIsImRiIiwiY29ubmVjdGlvbiIsIm9uIiwiY29uc29sZSIsImxvZyIsImJpbmQiLCJvbmNlIiwiY2FsbGJhY2siLCJ1c2UiLCJzZWNyZXQiLCJyZXNhdmUiLCJzYXZlVW5pbml0aWFsaXplZCIsInN0b3JlIiwibW9uZ29vc2VDb25uZWN0aW9uIiwiY29va2llIiwibWF4QWdlIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsImNhcnQiLCJkaXNwbGF5Q2FydCIsIml0ZW1zIiwidG90YWwiLCJ0b3RhbFF1YW50aXR5IiwiaXRlbSIsInB1c2giLCJxdHkiLCJwcmljZSIsInJlbmRlciIsInRpdGxlIiwiZW1haWwiLCJjb29raWVzIiwiY2FydFRvdGFsIiwibmFtZWUiLCJjYyIsInF1YW50IiwicG9zdCIsInF1YW50aXR5IiwiYm9keSIsInRlc3QiLCJwYXJhbXMiLCJpZCIsImZpbmRPbmUiLCJfaWQiLCJlcnIiLCJwcm9kdWN0IiwiaW1hZ2VQYXRoIiwiTnVtYmVyIiwicmVkaXJlY3QiLCJyZWdpc3RlckhlbHBlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiIyN01BQUEsR0FBSUEsQ0FBQUEsT0FBTywwQkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFYLENBQ0EsR0FBSUMsQ0FBQUEsTUFBTSwwQkFBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQUgsQ0FBVixDQUNBLEdBQUlDLENBQUFBLFFBQVEsMEJBQUdILE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBWixDQUNBLEdBQUlJLENBQUFBLE9BQU8sMEJBQUdKLE9BQU8sQ0FBQyxpQkFBRCxDQUFWLENBQVgsQ0FDQSxHQUFJSyxDQUFBQSxVQUFVLDBCQUFHTCxPQUFPLENB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bEJkLEtBQUssQ0FBRWdCLE9BQU8sQ0FBQ2hCLEtBRkcsQ0FHbEJGLEtBQUssQ0FBRWtCLE9BQU8sQ0FBQ2xCLEtBSEcsQ0FJbEJELEdBQUcsQ0FBRVcsUUFKYSxDQUtsQlMsU0FBUyxDQUFFRCxPQUFPLENBQUNDLFNBTEQsQ0FBdEIsQ0FEQSx5QkFRQTVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZ0IsSUFBWixFQUNILENBRUQsR0FBSUksQ0FBQUEsYUFBYSwyQkFBRyxDQUFILENBQWpCLENBQ0E7QUF0RDJDLHlCQXVEM0MsSUFBSSxHQUFJQyxDQUFBQSxJQUFSLEdBQWdCTCxDQUFBQSxJQUFoQixDQUFxQiwwQkFDbkJJLGFBQWEsRUFBSXdCLE1BQU0sQ0FBQzVCLElBQUksQ0FBQ0ssSUFBRCxDQUFKLENBQVdFLEdBQVosQ0FBdkIsQ0FDSCxDQXpENEMseUJBMEQ3Q3hCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZb0IsYUFBWixFQTFENkMseUJBMkQ3Q04sR0FBRyxDQUFDSixNQUFKLENBQVcsT0FBWCxDQUFvQlUsYUFBcEIsQ0FBbUMsQ0FBQ1QsTUFBTSxDQUFFLElBQUksRUFBSixDQUFPLElBQWhCLENBQW5DLEVBQ0U7QUFDQTtBQTdEMkMseUJBZ0U3Q0csR0FBRyxDQUFDK0IsUUFBSixDQUFhLE9BQWIsRUFDRCxDQWpFSCxFQWtFQyxDQTFFRCxFLHlCQTRFQXJELFVBQVUsQ0FBQ3NELGNBQVgsQ0FBMEIsUUFBMUIsQ0FBb0MsU0FBU3RCLEtBQVQsQ0FBZ0JELEdBQWhCLENBQW9CLGtEQUN0RCxNQUFPQyxDQUFBQSxLQUFLLENBQUdELEdBQWYsQ0FDRCxDQUZELEUseUJBSUF3QixNQUFNLENBQUNDLE9BQVAsQ0FBaUI3RCxNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxudmFyIG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxudmFyIHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcclxudmFyIE1vbmdvU3RvcmUgPSByZXF1aXJlKCdjb25uZWN0LW1vbmdvJykoc2Vzc2lvbik7IFxyXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hicycpO1xyXG5cclxudmFyIFByb2R1Y3QgPSByZXF1aXJlKCcuLi9tb2RlbHMvcHJvZHVjdCcpO1xyXG52YXIgRGVhbCA9IHJlcXVpcmUoJy4uL21vZGVscy9kZWFscycpO1xyXG5cclxuLy9tb25nb2RiOi8vYWRtaW46YWRtaW4xMjM0QGRzMDE0ODA4Lm1sYWIuY29tOjE0ODA4L2Vjb21tZXJjZWFwcFxyXG4vL21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvZWNvbW1lcmNlc3RvcmVcclxuXHJcbm1vbmdvb3NlLmNvbm5lY3QoJ21vbmdvZGI6Ly9hZG1pbjphZG1pbjEyMzRAZHMwMTQ4MDgubWxhYi5jb206MTQ4MDgvZWNvbW1lcmNlYXBwJyk7IFxyXG52YXIgZGI9bW9uZ29vc2UuY29ubmVjdGlvbjsgXHJcbmRiLm9uKCdlcnJvcicsIGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSwgXCJjb25uZWN0aW9uIGVycm9yXCIpKTsgXHJcbmRiLm9uY2UoJ29wZW4nLCBmdW5jdGlvbihjYWxsYmFjayl7IFxyXG4gICAgY29uc29sZS5sb2coXCJEYXRhYmFzZSBjb25uZWN0aW9uIHN1Y2NlZWRlZCBjYXJ0XCIpOyBcclxufSk7XHJcblxyXG5yb3V0ZXIudXNlKHNlc3Npb24oe1xyXG4gIHNlY3JldDogJ3NlY3JldCcsXHJcbiAgcmVzYXZlOiBmYWxzZSxcclxuICBzYXZlVW5pbml0aWFsaXplZDogZmFsc2UsXHJcbiAgc3RvcmU6IG5ldyBNb25nb1N0b3JlKHsgbW9uZ29vc2VDb25uZWN0aW9uOiBtb25nb29zZS5jb25uZWN0aW9uIH0pLFxyXG4gIGNvb2tpZTogeyBtYXhBZ2U6IDE4MCo2MCoxMDAwIH1cclxufSkpO1xyXG5cclxuLyogR0VUIGhvbWUgcGFnZS4gKi9cclxucm91dGVyLmdldCgnLycsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHZhciBjYXJ0ID0gcmVxLnNlc3Npb24uY2FydDtcclxuICAgICAgICB2YXIgZGlzcGxheUNhcnQgPSB7aXRlbXM6W10sIHRvdGFsOjB9XHJcbiAgICAgICAgdmFyIHRvdGFsPTA7XHJcbiAgICAgICAgdmFyIHRvdGFsUXVhbnRpdHkgPSAwO1xyXG5cclxuICAgICAgICAvL0dldCBUb3RhbFxyXG4gICAgICAgIGZvcih2YXIgaXRlbSBpbiBjYXJ0KXtcclxuICAgICAgICAgICAgZGlzcGxheUNhcnQuaXRlbXMucHVzaChjYXJ0W2l0ZW1dKTtcclxuICAgICAgICAgICAgdG90YWwgKz0gKGNhcnRbaXRlbV0ucXR5ICogY2FydFtpdGVtXS5wcmljZSk7XHJcbiAgICAgICAgICAgIC8vdG90YWxRdWFudGl0eSArPSBOdW1iZXIoY2FydFtpdGVtXS5xdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkaXNwbGF5Q2FydC50b3RhbCA9IHRvdGFsO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNhcnQpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2codG90YWxRdWFudGl0eSk7XHJcblxyXG4gICAgICAgIC8vUmVuZGVyIENhcnRcclxuICAgICAgXHJcbiAgICAgIHJlcy5yZW5kZXIoJ2NhcnQnLCB7IHRpdGxlOiAnRS1Db21tZXJjZSB8fCBDYXJ0JywgZW1haWw6IHJlcS5jb29raWVzLmVtYWlsLCBjYXJ0OiBjYXJ0LCBjYXJ0VG90YWw6IHRvdGFsLCBuYW1lZTogcmVxLmNvb2tpZXMuY2MsIHF1YW50OiByZXEuY29va2llcy5xdWFudH0pO1xyXG4gICAgIFxyXG59KTtcclxuXHJcbnJvdXRlci5wb3N0KCcvOmlkJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XHJcbiAgdmFyIHF1YW50aXR5ID0gcmVxLmJvZHkucXVhbnRpdHk7XHJcbiAgcmVxLnNlc3Npb24uY2FydCA9IHJlcS5zZXNzaW9uLmNhcnQgfHwge307XHJcbiAgdmFyIGNhcnQgPSByZXEuc2Vzc2lvbi5jYXJ0O1xyXG4gIGNvbnNvbGUubG9nKGNhcnQpO1xyXG4gIHZhciB0ZXN0ID0gcmVxLnBhcmFtcy5pZDtcclxuICBjb25zb2xlLmxvZyh0ZXN0KTtcclxuICBcclxuUHJvZHVjdC5maW5kT25lKHtfaWQ6dGVzdH0sIGZ1bmN0aW9uKGVycixwcm9kdWN0KXtcclxuICAgY29uc29sZS5sb2cocHJvZHVjdCk7XHJcbiAgICAgIGlmKGVycil7XHJcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICBQcm9kdWN0LmZpbmRPbmUoe19pZDp0ZXN0fSwgZnVuY3Rpb24oZXJyLHByb2R1Y3Qpe1xyXG4gICBjb25zb2xlLmxvZyhwcm9kdWN0KTtcclxuICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH1cclxuICAgICAgaWYoY2FydFtyZXEucGFyYW1zLmlkXSl7XHJcbiAgICAgICAgICBjYXJ0W3JlcS5wYXJhbXMuaWRdLnF0eSsrO1xyXG5cclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgICAgY2FydFtyZXEucGFyYW1zLmlkXSA9IHtcclxuICAgICAgICAgICAgICBpdGVtOnByb2R1Y3QuX2lkLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiBwcm9kdWN0LnRpdGxlLFxyXG4gICAgICAgICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxyXG4gICAgICAgICAgICAgIHF0eTogcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgaW1hZ2VQYXRoOiBwcm9kdWN0LmltYWdlUGF0aFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5sb2coY2FydCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciB0b3RhbFF1YW50aXR5ID0gMDtcclxuICAgICAgLy9HZXQgVG90YWxcclxuICAgICAgZm9yKHZhciBpdGVtIGluIGNhcnQpe1xyXG4gICAgICAgIHRvdGFsUXVhbnRpdHkgKz0gTnVtYmVyKGNhcnRbaXRlbV0ucXR5KTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHRvdGFsUXVhbnRpdHkpO1xyXG4gICAgcmVzLmNvb2tpZSgncXVhbnQnLCB0b3RhbFF1YW50aXR5LCB7bWF4QWdlOiAxODAqNjAqMTAwMH0pO1xyXG4gICAgICAvL3Jlcy5yZW5kZXIoJy4vY2FydCcsIHtjYXJ0OiBjYXJ0LCBtZXNzYWdlOidBZGRlZCB0byBjYXJ0IHN1Y2Nlc3NmdWxseScsIHN1Y2Nlc3M6J21lc3NhZ2UnfSk7XHJcbiAgICAgIC8vcmVzLmNsZWFyQ29va2llKCdxdWFudCcpO1xyXG4gICAgICBcclxuICAgICAgXHJcbiAgICByZXMucmVkaXJlY3QoJy9jYXJ0Jyk7XHJcbiAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYoY2FydFtyZXEucGFyYW1zLmlkXSl7XHJcbiAgICAgICAgICBjYXJ0W3JlcS5wYXJhbXMuaWRdLnF0eSsrO1xyXG5cclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgICAgY2FydFtyZXEucGFyYW1zLmlkXSA9IHtcclxuICAgICAgICAgICAgICBpdGVtOnByb2R1Y3QuX2lkLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiBwcm9kdWN0LnRpdGxlLFxyXG4gICAgICAgICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxyXG4gICAgICAgICAgICAgIHF0eTogcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgaW1hZ2VQYXRoOiBwcm9kdWN0LmltYWdlUGF0aFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5sb2coY2FydCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciB0b3RhbFF1YW50aXR5ID0gMDtcclxuICAgICAgLy9HZXQgVG90YWxcclxuICAgICAgZm9yKHZhciBpdGVtIGluIGNhcnQpe1xyXG4gICAgICAgIHRvdGFsUXVhbnRpdHkgKz0gTnVtYmVyKGNhcnRbaXRlbV0ucXR5KTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHRvdGFsUXVhbnRpdHkpO1xyXG4gICAgcmVzLmNvb2tpZSgncXVhbnQnLCB0b3RhbFF1YW50aXR5LCB7bWF4QWdlOiAxODAqNjAqMTAwMH0pO1xyXG4gICAgICAvL3Jlcy5yZW5kZXIoJy4vY2FydCcsIHtjYXJ0OiBjYXJ0LCBtZXNzYWdlOidBZGRlZCB0byBjYXJ0IHN1Y2Nlc3NmdWxseScsIHN1Y2Nlc3M6J21lc3NhZ2UnfSk7XHJcbiAgICAgIC8vcmVzLmNsZWFyQ29va2llKCdxdWFudCcpO1xyXG4gICAgICBcclxuICAgICAgXHJcbiAgICByZXMucmVkaXJlY3QoJy9jYXJ0Jyk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigndG90YWxQJywgZnVuY3Rpb24ocHJpY2UsIHF0eSl7XHJcbiAgcmV0dXJuIHByaWNlICogcXR5O1xyXG59KVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdfQ==